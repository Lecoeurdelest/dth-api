FROM gradle:8.5-jdk17

# Install netcat for DB waiting
RUN apt-get update && apt-get install -y netcat-openbsd && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy Gradle configuration files first for better layer caching
COPY settings.gradle.kts .
COPY build.gradle.kts .
COPY gradle.properties .

# Copy source code
COPY src src

# Default command (will be overridden by compose)
CMD ["gradle", "bootRun", "--continuous"]

